<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ThatLegendJack</title>

<style>
  :root {
    --ars-red: #EF0107;
    --ars-white: #FFF;
    --ars-navy: #063672;
    --ars-gold: #9C824A;
  }

  /* Body */
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,var(--ars-red) 0%,var(--ars-white) 35%,var(--ars-navy) 70%,var(--ars-gold) 100%);
    color: #fff;
    min-height: 100vh;
    text-align: center;
    overflow-x: hidden;
  }

  /* Heading (animated gradient text) */
  h1 {
    margin-top: 1rem;
    font-size: 2.8rem;
    font-weight: 900;
    text-shadow: 2px 2px 5px #000;
    background: linear-gradient(270deg, #EF0107, #FFFFFF, #063672, #EF0107);
    background-size: 600% 600%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: transparent;
    animation: gradientShift 8s ease infinite;
  }
  @keyframes gradientShift {
    0%   { background-position: 0% 50%; }
    50%  { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Login Box */
  .login-container {
    position: fixed;
    top: 10px;
    right: 20px;
    background: rgba(0, 0, 0, .8);
    padding: 1rem;
    border-radius: 10px;
    z-index: 50;
  }
  .login-container a,
  .login-container button {
    display: block;
    padding: .7rem 1rem;
    background: var(--ars-red);
    color: #fff;
    font-weight: 700;
    text-decoration: none;
    border-radius: 8px;
    box-shadow: 2px 2px 6px rgba(0, 0, 0, .6);
    border: none;
    cursor: pointer;
  }
  .login-container a:hover,
  .login-container button:hover { background: var(--ars-gold); }

  /* Navigation */
  .nav-center {
    margin: 1.25rem auto 0;
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  .nav-box {
    display: block;
    min-width: 180px;
    padding: 1rem 2rem;
    font-weight: 800;
    color: #fff;
    text-decoration: none;
    border-radius: 12px;
    box-shadow: 2px 2px 8px rgba(0,0,0,.6);
    transition: transform .2s, filter .3s;
    border: 2px solid var(--ars-white);
    cursor: pointer;
  }
  .nav-box:hover { transform: translateY(-3px); filter: brightness(1.05); }
  .about { background: linear-gradient(135deg, var(--ars-red) 0%, var(--ars-gold) 100%); }
  .leaderboards { background: linear-gradient(135deg, var(--ars-navy) 0%, var(--ars-white) 100%); }

  .hidden { display: none; }
  section { padding: 1rem; }

  /* Unified gradient ‚Äúsurface‚Äù per page (About & Leaderboards) */
  .surface{
    max-width:1100px;margin:1rem auto;padding:1.2rem 1.2rem 1.4rem;
    border-radius:16px;text-align:left;border:1px solid rgba(255,255,255,.18);
    box-shadow:0 12px 28px rgba(0,0,0,.28);
    background:rgba(0,0,0,.35); /* fallback */
  }
  .surface-about{
    background:linear-gradient(135deg, rgba(239,1,7,.85), rgba(156,130,74,.85));
  }
  .surface-leader{
    background:linear-gradient(135deg, rgba(6,54,114,.85), rgba(255,255,255,.38));
  }

  /* Twitch Player */
  .player-wrap { max-width: 900px; margin: 1.25rem auto 0; padding: 0 1rem; }
  .player-frame {
    position: relative; width: 100%; aspect-ratio: 16/9;
    background: #0e0e10; border: 2px solid var(--ars-gold);
    border-radius: 12px; overflow: hidden;
    box-shadow: 0 8px 24px rgba(0,0,0,.35);
  }
  .player-frame #twitch-player,
  .player-frame iframe { position: absolute; inset: 0; width: 100%; height: 100%; }
  .offline-banner {
    position: absolute; inset: 0; display: flex; flex-direction: column;
    align-items: center; justify-content: center; gap: .75rem;
    background: rgba(0,0,0,.8); text-align: center; padding: 1rem;
    visibility: hidden; opacity: 0; transition: .25s;
  }
  .offline-banner img {
    max-width: 75%; height: auto; border-radius: 8px;
    box-shadow: 0 6px 18px rgba(0,0,0,.45);
  }
  .offline-banner .offline-text { color: #fff; }
  .offline-btn {
    display: inline-block; margin-top: .25rem; padding: .5rem .9rem;
    border-radius: 8px; background: linear-gradient(135deg,var(--ars-red),var(--ars-gold));
    color: #fff; text-decoration: none; font-weight: 800;
  }
  .offline-show { visibility: visible; opacity: 1; }
  .player-note { display: block; opacity: .8; margin-top: .35rem; }

  /* Left Social (Twitch/TikTok/Kick/OnlyFans) */
  .social-bar {
    position: fixed; top: 50%; left: 10px; transform: translateY(-50%);
    display: flex; flex-direction: column; gap: 2rem; z-index: 40;
  }
  .social-link {
    width: 65px; height: 65px; border-radius: 50%; overflow: hidden;
    background: #000; box-shadow: 2px 2px 6px rgba(0,0,0,.6);
    display: flex; align-items: center; justify-content: center;
    transition: transform .2s, box-shadow .3s;
  }
  .social-link img { width: 100%; height: 100%; object-fit: cover; }
  .social-link:hover { transform: scale(1.1); box-shadow: 0 0 15px var(--ars-gold); }

  /* Admin/Staff Panels */
  .panel {
    position: fixed;
    background: rgba(0,0,0,.75);
    border: 2px solid var(--ars-gold);
    border-radius: 12px;
    padding: 12px;
    width: min(360px, 92vw);
    text-align: left;
    z-index: 45;
  }
  #staffPanel { top: 90px; right: 20px; display: none; }
  #adminPanel { top: 20px; left: 20px; display: none; } /* top-left as requested */
  .row { display: flex; gap: .5rem; margin: .45rem 0; }
  .row input,.row textarea { flex: 1; padding: .5rem; border: none; border-radius: 8px; }
  .row button {
    padding: .5rem .8rem; border: none; border-radius: 8px;
    background: var(--ars-red); color: #fff; font-weight: 700; cursor: pointer;
  }
  .list { max-height: 160px; overflow: auto; border: 1px solid rgba(255,255,255,.2); padding: .5rem; border-radius: 8px; }
  .badge { display: inline-block; background: #333; padding: .15rem .45rem; border-radius: 6px; margin-left: .35rem; font-size: .75rem; }

  /* BIG setup panel on Leaderboards (obvious area for bits:read creds) */
  .setup{
    background:rgba(0,0,0,.85);
    border:3px dashed var(--ars-gold);border-radius:16px;padding:1.2rem;margin-bottom:1rem;
    box-shadow:0 10px 30px rgba(0,0,0,.35)
  }
  .setup h3{margin:.2rem 0 .6rem}
  .setup label{display:block;font-weight:700;margin:.5rem 0 .3rem}
  .setup textarea{
    width:100%;min-height:70px;padding:.6rem;border:none;border-radius:8px;
    font-family:monospace;font-size:1rem;resize:vertical
  }
  .setup .actions{display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.9rem}
  .setup .primary{background:var(--ars-gold);color:#000}
  .setup button{padding:.7rem 1.2rem;border:none;border-radius:8px;font-weight:800;cursor:pointer}
  .tiny{opacity:.85;font-size:.9rem;margin-top:.25rem}
  .callout{background:rgba(239,1,7,.15);border-left:4px solid var(--ars-red);padding:.6rem .75rem;border-radius:8px;margin:.75rem 0}

  /* Circles for Spotify & Discord (from your snippet) */
  .circle-container {
    position: absolute;
    top: 40%;
    right: 250px;
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }
  .circle {
    width: 180px;
    height: 180px;
    background: #111;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 1rem;
    transition: all 0.3s ease;
  }
  @media (max-width: 900px) {
    .circle-container {
      position: static;
      flex-direction: row;
      justify-content: center;
      margin-top: 2rem;
    }
    .circle { width: 140px; height: 140px; }
  }
  @media (max-width: 600px) {
    .circle-container {
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }
    .circle { width: 120px; height: 120px; font-size: 0.8rem; }
  }

  /* Tables/cards inside surfaces */
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
  .card{
    border-radius:12px;padding:1rem;
    background:transparent;border:1px solid rgba(255,255,255,.25);
    box-shadow:0 4px 14px rgba(0,0,0,.2)
  }
  table{width:100%;border-collapse:collapse}
  th,td{padding:.65rem .5rem;text-align:center;border-bottom:1px solid rgba(255,255,255,.18)}
  th{background:rgba(255,255,255,.08)}
</style>
</head>
<body>

  <h1>ThatLegendJack</h1>

  <!-- Login / Logout -->
  <div class="login-container" id="authBox"><a href="#" onclick="showSection('login')">Login</a></div>

  <!-- Nav -->
  <div class="nav-center">
    <div class="nav-box about" onclick="showSection('about')">About Me</div>
    <div class="nav-box leaderboards" onclick="showSection('leaderboards')">Leaderboards</div>
  </div>

  <!-- LEFT Social (Twitch/TikTok/Kick use profile pics; OnlyFans keeps logo) -->
  <div class="social-bar">
    <a class="social-link" id="link_twitch" href="https://www.twitch.tv/ThatLegendJackk" target="_blank">
      <img id="img_twitch" src="images/twitch-logo.png" alt="Twitch">
    </a>
    <a class="social-link" id="link_tiktok" href="https://www.tiktok.com/@ThatLegendJackk" target="_blank">
      <img id="img_tiktok" src="images/tiktok-logo.png" alt="TikTok">
    </a>
    <a class="social-link" id="link_kick" href="https://kick.com/ThatLegendJackk" target="_blank">
      <img id="img_kick" src="images/kick-logo.png" alt="Kick">
    </a>
    <a class="social-link" id="link_onlyfans" href="https://onlyfans.com/yourlink" target="_blank">
      <img id="img_onlyfans" src="images/onlyfans-logo.png" alt="OnlyFans">
    </a>
  </div>

  <!-- Admin Panel (top-left) -->
  <div class="panel" id="adminPanel">
    <h3>Admin Panel</h3>
    <small>Manage staff users on this device</small>
    <div class="row">
      <input id="newUser" placeholder="Username">
      <input id="newPass" placeholder="Password">
      <button onclick="addStaff()">Add</button>
    </div>
    <div class="list" id="userList">Loading users‚Ä¶</div>
  </div>

  <!-- Staff Panel (top-right) -->
  <div class="panel" id="staffPanel">
    <h3>Staff Panel</h3>
    <small>Signed in as <span id="who"></span> <span class="badge" id="roleBadge"></span></small>

    <!-- Edit social links -->
    <div class="row"><input id="in_twitch" placeholder="Twitch URL"><button onclick="saveLink('twitch')">Save</button></div>
    <div class="row"><input id="in_tiktok" placeholder="TikTok URL"><button onclick="saveLink('tiktok')">Save</button></div>
    <div class="row"><input id="in_kick" placeholder="Kick URL"><button onclick="saveLink('kick')">Save</button></div>
    <div class="row"><input id="in_onlyfans" placeholder="OnlyFans URL"><button onclick="saveLink('onlyfans')">Save</button></div>

    <!-- Edit profile image URLs for Twitch/TikTok/Kick -->
    <div class="row"><input id="imgurl_twitch" placeholder="Twitch Profile Image URL"><button onclick="saveImg('twitch')">Save</button></div>
    <div class="row"><input id="imgurl_tiktok" placeholder="TikTok Profile Image URL"><button onclick="saveImg('tiktok')">Save</button></div>
    <div class="row"><input id="imgurl_kick" placeholder="Kick Profile Image URL"><button onclick="saveImg('kick')">Save</button></div>

    <!-- Discord status override -->
    <div class="row"><input id="in_discord" placeholder="Discord status‚Ä¶"><button onclick="saveText('discord-status','in_discord')">Save</button></div>

    <!-- Spotify: paste access token once (stored locally) -->
    <div class="row">
      <textarea id="spotify_token" placeholder="Paste Spotify ACCESS TOKEN (scope: user-read-currently-playing or user-read-playback-state)"></textarea>
      <button onclick="saveSpotifyToken()">Save</button>
    </div>
    <small style="opacity:.85;display:block;margin-top:-.2rem">Token saved in this browser. For production, use a server to refresh tokens.</small>

    <div class="row"><button class="logout" onclick="logout()">Logout</button></div>
  </div>

  <!-- HOME -->
  <section id="home">
    <div class="player-wrap">
      <div class="player-frame">
        <div id="twitch-player"></div>
        <div id="twitch-offline" class="offline-banner">
          <img src="images/twitch-offline.jpg" alt="Stream is offline" />
          <div class="offline-text">
            <strong>ThatLegendJackk is currently offline.</strong><br/>
            Check back soon or visit the channel!
          </div>
          <a class="offline-btn" target="_blank" href="https://www.twitch.tv/ThatLegendJackk">Go to Twitch</a>
        </div>
      </div>
      <small class="player-note">If the player doesn‚Äôt load on localhost, serve the page over http(s); the Twitch embed requires a matching <em>parent</em> domain.</small>
    </div>

    <!-- Right area status circles (from your CSS snippet) -->
    <div class="circle-container">
      <div class="circle" id="spotify-status" title="Spotify now playing">
        <span class="track" id="spotify-track">Spotify: Not Playing</span>
      </div>
      <div class="circle" id="discord-status">Discord: Offline</div>
    </div>
  </section>

  <!-- ABOUT ‚Äî single unified gradient surface -->
  <section id="about" class="hidden">
    <div class="surface surface-about">
      <h2>About Me</h2>
      <div id="about-box">
        <div id="view"></div>

        <div id="editor" style="display:none;margin-top:1rem">
          <textarea id="aboutTxt" style="width:100%;min-height:160px;border:none;border-radius:12px;padding:.75rem"></textarea>
          <div class="row" style="margin-top:.6rem">
            <button class="save" onclick="saveAbout()" style="background:var(--ars-red);color:#fff;border:none;border-radius:10px;padding:.6rem 1rem;font-weight:700;cursor:pointer">Save</button>
            <button onclick="showSection('home')" class="nav-box about" style="min-width:auto;padding:.6rem 1rem">‚Üê Back Home</button>
          </div>
        </div>

        <div id="viewerButtons" class="row" style="margin-top:.6rem">
          <button onclick="showSection('home')" class="nav-box about" style="min-width:auto;padding:.6rem 1rem">‚Üê Back Home</button>
        </div>
      </div>
    </div>
  </section>

  <!-- LEADERBOARDS ‚Äî single unified gradient surface -->
  <section id="leaderboards" class="hidden">
    <div class="surface surface-leader">
      <h2>Leaderboards</h2>

      <!-- SETUP PANEL (auto-hides once creds are saved) -->
      <div id="bitsSetup" class="setup">
        <h3>üõ†Ô∏è Setup Twitch Bits (requires <code>bits:read</code>)</h3>
        <div class="callout"><strong>Heads up:</strong> For production, keep tokens server-side. This saves in your browser only.</div>
        <label for="ci">Client ID</label>
        <textarea id="ci" placeholder="Paste YOUR CLIENT_ID here"></textarea>
        <label for="tk">Access Token</label>
        <textarea id="tk" placeholder="Paste YOUR ACCESS TOKEN (bits:read) here"></textarea>
        <div class="actions">
          <button id="apply" class="primary">Apply & Save</button>
          <button id="clear">Clear Saved Credentials</button>
        </div>
        <div class="tiny">These credentials are stored in <code>localStorage</code> on this device & browser until you clear them.</div>
      </div>

      <div class="grid">
        <!-- LEFT: Bits -->
        <div class="card">
          <h3>Top 10 Bits ‚Äî Live</h3>
          <table id="bits-table">
            <thead><tr><th>Rank</th><th>User</th><th>Bits</th></tr></thead>
            <tbody><tr><td colspan="3">Waiting for Twitch setup‚Ä¶</td></tr></tbody>
          </table>
        </div>

        <!-- RIGHT: Gifted Subs -->
        <div class="card">
          <h3>Gifted Subs</h3>
          <table id="subs-table">
            <thead><tr><th>#</th><th>User</th><th>Gifted Subs</th><th class="adminCol">Actions</th></tr></thead>
            <tbody id="subs-body"></tbody>
          </table>
          <div id="subsAdmin" style="display:none;margin-top:.75rem">
            <div class="row">
              <input id="subUser" placeholder="Username">
              <input id="subCount" type="number" min="0" placeholder="Count">
              <button onclick="addSub()">Add/Update</button>
            </div>
            <button onclick="clearSubs()">Clear All</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- LOGIN -->
  <section id="login" class="hidden">
    <div class="surface" style="max-width:520px;text-align:center">
      <h2>Staff Login</h2>
      <input id="u" placeholder="Username" style="width:100%;padding:.8rem;border:none;border-radius:8px;margin:.5rem 0"/>
      <input id="p" type="password" placeholder="Password" style="width:100%;padding:.8rem;border:none;border-radius:8px;margin:.5rem 0"/>
      <button id="go" class="nav-box about" style="min-width:auto;padding:.7rem 1rem;border:0">Login</button>
      <p id="msg"></p>
      <div style="margin-top:.6rem">
        <button onclick="showSection('home')" class="nav-box leaderboards" style="min-width:auto;padding:.6rem 1rem;border:0">‚Üê Back Home</button>
      </div>
    </div>
  </section>

  <!-- Twitch Embed lib -->
  <script src="https://embed.twitch.tv/embed/v1.js"></script>
  <!-- App JS -->
  <script src="main.js"></script>
</body>
</html>
